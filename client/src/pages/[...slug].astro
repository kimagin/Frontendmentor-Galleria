---
import SlideShowLayout from '../layouts/SlideShowLayout.astro'
import { data } from '../js/data'
import { slugify } from '../js/utils'
import HeroImage from '../components/presentation/HeroImage.astro'

const SERVER = data().SERVER

// Dynamic rout creation
export async function getStaticPaths() {
  const SERVER = data().SERVER
  const request = await fetch(SERVER + 'assets/imagedata.json')
  const dataBase = await request.json()
  const pages = [...dataBase]
  pages.forEach((page) => {
    page['slug'] = slugify(page.name)
  })

  return pages.map(({ name, slug, images, artist }) => {
    return {
      params: { slug },
      props: { name, slug, images, artist },
    }
  })
}
const {
  images,
  slug,
  artist,
  name = images.name,
  description = images.description,
  year = images.year,
  artistImage = SERVER + artist.image,
  artistName = artist.name,
  heroSmall = SERVER + images.hero.small,
  heroLarge = SERVER + images.hero.large,
  gallery = SERVER + images.gallery,
} = Astro.props
---

<SlideShowLayout title={name}>
  <section class="presentation py-24">
    {/*Presentation Page template */}
    <div class="image-container border w-1/3 flex justify-center items">
      <HeroImage
        type={heroSmall}
        alt={name}
        classes={['object-cover w-full']}
      />
    </div>
    <div class="information-container"></div>
  </section>
</SlideShowLayout>

<style>
  .presentation {
    @apply container h-full mx-auto max-w-7xl px-8 flex;
  }
  .information-container {
    @apply flex-1;
  }
</style>
